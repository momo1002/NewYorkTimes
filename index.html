<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NYT</title>
</head>
<body>
    <div class="controls">
        <form>
            <p>
                <input type="text" id="search" class="search" required />
            </p>
            <p>
                <input type="date" id="start-date" class="start-date" pattern="[0-9]{8}">
            </p>
            <p>
                <input type="date" id="end-date" class="end-date" pattern="[0-9]{8}">
            </p>
            <p>
                <button class="submit">Search</button>
            </p>
        </form>
    </div>
    <div class="results">
        <nav>
            <button class="prev">Prev 10</button>
            <button class="next">Next 10</button>
        </nav>

        <section>       
        </section>
    </div>
    <script>

        const baseURL = "https://api.nytimes.com/svc/search/v2/articlesearch.json";
        const API_KEY = "8Mqg6DKG2lQqb7zOkdz7Ghs6Az9GqwqR";
        let url;

        const searchBox = document.querySelector('.search');
        const startDate = document.querySelector('.start-date');
        const endDate   = document.querySelector('.end-date');
        const searchBtn = document.querySelector('form'); 
        const nextBtn   = document.querySelector('.next');
        const prevBtn   = document.querySelector('.prev');

        const section = document.querySelector('section');
        const nav     = document.querySelector('nav');

        searchBtn.addEventListener('submit', submitSearch);
        let pageNumber;

        function submitSearch(e){
            pageNumber = 0;
            fetchResults(e);
        }

        function fetchResults(e){
            e.preventDefault();
            url = baseURL
                + '?api-key=' + API_KEY
                + '&q=' + searchBox.nodeValue
                + '&page=' + pageNumber
                + '&fq=document_type:("article")';

            if(startDate.value !== ''){
                url += '&begin_date=' + startDate.value;
            } 
            if(endDate.value !== ''){
                url += '&end_date=' + endDate.value; 
            }

        }

        fetch(url)
        .then(function(result){ return result.json(); })
        .then(function(json){ displayResults(json); })

        // fetch()
        // .then()
        // .then();

        function displayResults(json){
            
        }


    </script>
</body>
</html>